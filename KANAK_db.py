# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'mainwin.ui'
#
# Created by: PyQt5 UI code generator 5.15.0
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
from reportlab.pdfgen import canvas
import os
from datetime import date
import sqlite3
import sys

class Ui_mainwin(object):
    def setupUi(self, mainwin):
        mainwin.setObjectName("mainwin")
        mainwin.setEnabled(True)
        mainwin.setFixedSize(1366,768)
        #mainwin.showMaximized()
        frameGm = QtWidgets.QMainWindow.frameGeometry(mainwin)

        screen = QtWidgets.QApplication.desktop().screenNumber(QtWidgets.QApplication.desktop().cursor().pos())
        centerPoint = QtWidgets.QApplication.desktop().screenGeometry(screen).center()
        frameGm.moveCenter(centerPoint)
        mainwin.move(frameGm.topLeft())
        #mainwin.centralWidget()

        font = QtGui.QFont()
        font.setFamily("Arial Rounded MT Bold")
        mainwin.setFont(font)
        mainwin.setMouseTracking(False)
        mainwin.setFocusPolicy(QtCore.Qt.NoFocus)
        mainwin.setTabShape(QtWidgets.QTabWidget.Rounded)
        self.centralwidget = QtWidgets.QWidget(mainwin)
        self.centralwidget.setObjectName("centralwidget")
        self.labelm1 = QtWidgets.QLabel(self.centralwidget)
        self.labelm1.setGeometry(QtCore.QRect(580, 10, 91, 91))
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(20)
        font.setBold(True)
        font.setItalic(True)
        font.setWeight(75)
        self.labelm1.setFont(font)
        self.labelm1.setText("")
        self.labelm1.setPixmap(QtGui.QPixmap("kanaksmall.png"))
        self.labelm1.setAlignment(QtCore.Qt.AlignCenter)
        self.labelm1.setObjectName("labelm1")
        self.expire = QtWidgets.QLabel(self.centralwidget)
        self.expire.setGeometry(QtCore.QRect(880,10, 481, 41))
        font = QtGui.QFont()
        font.setFamily("Arial Rounded MT Bold")
        font.setPointSize(8)
        self.expire.setFont(font)
        today = date.today()
        todaysdate = today.strftime("%d/%m/%Y")
        d,m,y = todaysdate.split('/')
        b1 = date(int(y),int(m),int(d))
        b2 = date(2020,10,29)
        deadline = b2.strftime("%d/%m/%Y")
        if b1 > b2:
            self.expire.setText("Free Service Expired. Contact ILAN Solutions for more details.")
        elif b1 == b2:
            self.expire.setText("Service of Product Expires TODAY")
        else:
            self.expire.setText("Free Service of Product Expires on: "+ str(deadline))
        self.expire.setObjectName("expiredate")
        self.labelm2 = QtWidgets.QLabel(self.centralwidget)
        self.labelm2.setGeometry(QtCore.QRect(580, 130, 181, 221))
        font = QtGui.QFont()
        font.setFamily("AR JULIAN")
        font.setPointSize(10)
        self.labelm2.setFont(font)
        self.labelm2.setText("")
        self.labelm2.setPixmap(QtGui.QPixmap("custWebp.net-resizeimage.png"))
        self.labelm2.setObjectName("labelm2")
        self.labelm3 = QtWidgets.QLabel(self.centralwidget)
        self.labelm3.setGeometry(QtCore.QRect(660, 10, 81, 81))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.labelm3.setFont(font)
        self.labelm3.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.labelm3.setText("")
        self.labelm3.setPixmap(QtGui.QPixmap("logosmall.png"))
        self.labelm3.setObjectName("labelm3")
        self.getstartedb = QtWidgets.QPushButton(self.centralwidget)
        self.getstartedb.setGeometry(QtCore.QRect(620, 580, 121, 31))
        palette = QtGui.QPalette()
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.WindowText, brush)
        brush = QtGui.QBrush(QtGui.QColor(207, 207, 207))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Button, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Light, brush)
        brush = QtGui.QBrush(QtGui.QColor(231, 231, 231))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Midlight, brush)
        brush = QtGui.QBrush(QtGui.QColor(103, 103, 103))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Dark, brush)
        brush = QtGui.QBrush(QtGui.QColor(138, 138, 138))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Mid, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.BrightText, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ButtonText, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Base, brush)
        brush = QtGui.QBrush(QtGui.QColor(207, 207, 207))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Window, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.Shadow, brush)
        brush = QtGui.QBrush(QtGui.QColor(231, 231, 231))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.AlternateBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ToolTipBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Active, QtGui.QPalette.ToolTipText, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.WindowText, brush)
        brush = QtGui.QBrush(QtGui.QColor(207, 207, 207))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Button, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Light, brush)
        brush = QtGui.QBrush(QtGui.QColor(231, 231, 231))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Midlight, brush)
        brush = QtGui.QBrush(QtGui.QColor(103, 103, 103))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Dark, brush)
        brush = QtGui.QBrush(QtGui.QColor(138, 138, 138))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Mid, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.BrightText, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ButtonText, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Base, brush)
        brush = QtGui.QBrush(QtGui.QColor(207, 207, 207))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Window, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.Shadow, brush)
        brush = QtGui.QBrush(QtGui.QColor(231, 231, 231))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.AlternateBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ToolTipBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Inactive, QtGui.QPalette.ToolTipText, brush)
        brush = QtGui.QBrush(QtGui.QColor(103, 103, 103))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.WindowText, brush)
        brush = QtGui.QBrush(QtGui.QColor(207, 207, 207))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Button, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Light, brush)
        brush = QtGui.QBrush(QtGui.QColor(231, 231, 231))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Midlight, brush)
        brush = QtGui.QBrush(QtGui.QColor(103, 103, 103))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Dark, brush)
        brush = QtGui.QBrush(QtGui.QColor(138, 138, 138))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Mid, brush)
        brush = QtGui.QBrush(QtGui.QColor(103, 103, 103))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Text, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 255))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.BrightText, brush)
        brush = QtGui.QBrush(QtGui.QColor(103, 103, 103))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ButtonText, brush)
        brush = QtGui.QBrush(QtGui.QColor(207, 207, 207))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Base, brush)
        brush = QtGui.QBrush(QtGui.QColor(207, 207, 207))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Window, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.Shadow, brush)
        brush = QtGui.QBrush(QtGui.QColor(207, 207, 207))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.AlternateBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(255, 255, 220))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ToolTipBase, brush)
        brush = QtGui.QBrush(QtGui.QColor(0, 0, 0))
        brush.setStyle(QtCore.Qt.SolidPattern)
        palette.setBrush(QtGui.QPalette.Disabled, QtGui.QPalette.ToolTipText, brush)
        self.getstartedb.setPalette(palette)
        font = QtGui.QFont()
        font.setFamily("Arial Black")
        font.setBold(True)
        font.setWeight(75)
        self.getstartedb.setFont(font)
        self.getstartedb.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.getstartedb.setAutoDefault(False)
        self.getstartedb.setDefault(False)
        self.getstartedb.setFlat(False)
        self.getstartedb.setObjectName("getstartedb")
        self.getstartedb.clicked.connect(self.check_ph)
        self.label = QtWidgets.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(410, 360, 531, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(16)
        font.setBold(True)
        font.setWeight(75)
        self.label.setFont(font)
        self.label.setObjectName("label")
        self.label_2 = QtWidgets.QLabel(self.centralwidget)
        self.label_2.setGeometry(QtCore.QRect(510, 390, 321, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.label_2.setFont(font)
        self.label_2.setObjectName("label_2")
        self.label_3 = QtWidgets.QLabel(self.centralwidget)
        self.label_3.setGeometry(QtCore.QRect(440, 460, 451, 41))
        font = QtGui.QFont()
        font.setFamily("Trebuchet MS")
        font.setPointSize(14)
        font.setBold(True)
        font.setItalic(False)
        font.setWeight(75)
        self.label_3.setFont(font)
        self.label_3.setObjectName("label_3")
        self.custmobile = QtWidgets.QLineEdit(self.centralwidget)
        self.custmobile.setGeometry(QtCore.QRect(582, 510, 191, 20))
        self.custmobile.setFocusPolicy(QtCore.Qt.StrongFocus)
        self.custmobile.setText("")
        self.custmobile.setObjectName("custmobile")
        self.label_4 = QtWidgets.QLabel(self.centralwidget)
        self.label_4.setGeometry(QtCore.QRect(660, 10, 81, 81))
        self.label_4.setText("")
        self.label_4.setPixmap(QtGui.QPixmap("logo small.png"))
        self.label_4.setObjectName("label_4")
        mainwin.setCentralWidget(self.centralwidget)
        self.menuBar = QtWidgets.QMenuBar(mainwin)
        self.menuBar.setGeometry(QtCore.QRect(0, 0, 1366, 21))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setBold(True)
        font.setWeight(75)
        self.menuBar.setFont(font)
        self.menuBar.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.menuBar.setObjectName("menuBar")
        self.menuEDIT = QtWidgets.QMenu(self.menuBar)
        self.menuEDIT.setGeometry(QtCore.QRect(204, 125, 152, 50))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.menuEDIT.setFont(font)
        self.menuEDIT.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.menuEDIT.setObjectName("menuEDIT")
        mainwin.setMenuBar(self.menuBar)
        self.menuBar.addAction(self.menuEDIT.menuAction())
        self.menuEDIT.addAction('Edit Customer/Product Details')
        self.menuEDIT.triggered.connect(self.update)

        self.retranslateUi(mainwin)
        QtCore.QMetaObject.connectSlotsByName(mainwin)

    def retranslateUi(self, mainwin):
        _translate = QtCore.QCoreApplication.translate
        mainwin.setWindowTitle(_translate("mainwin", "KANAK-Login"))
        self.getstartedb.setText(_translate("mainwin", "Continue"))
        self.label.setText(_translate("mainwin", "<html><head/><body><p align= \"center\"><span style=\" font-size:18pt; color:#437aad;\">HOUSE OF SEA FOOD</span></p></body></html>"))
        self.label_2.setText(_translate("mainwin", "<html><head/><body><p align= \"center\"><span style=\" font-size:12pt; color:#437aad;\">Fresh &amp; Clean</span></p></body></html>"))
        self.label_3.setText(_translate("mainwin", "<html><head/><body><p align= \"center\"><span style=\" font-size:12pt;\">Enter Customer Contact Number</span></p></body></html>"))
        self.menuEDIT.setTitle(_translate("mainwin", "Customer and Product Details"))

    def check_ph(self):
        conn_u= sqlite3.connect('users.db')
        input = self.custmobile.text()
        if len(input.strip()) == 0:
            self.messagewindow("Enter Mobile Number")
        else:
            cursor_u = conn_u.execute("SELECT * from USER where MOBILE= ?",(input,))
            rows = []
            for row in cursor_u:
                rows.append(row)
            conn_u.close()
            if rows==[]:
                self.opennewcustwin(input)
            else:
                self.openbillwin(rows[0])

    def openbillwin(self,list):
        self.window = QtWidgets.QMainWindow()
        self.billwin = Ui_billwin()
        self.billwin.setupUi(self.window,list)
        self.custmobile.setText("")
        self.window.show()
        #mainwin.hide()

    def opennewcustwin(self,phno):
        window = QtWidgets.QMainWindow()
        newcustwin = Ui_newcustwin()
        newcustwin.setupUi(window,phno)
        #mainwin.hide()
        self.custmobile.setText("")
        window.show()

    def update(self):
        self.window = QtWidgets.QMainWindow()
        self.updatewin = Ui_update()
        self.updatewin.setupUi(self.window)
        #mainwin.hide()
        self.window.show()

    def messagewindow(self,text):
        msg = QtWidgets.QMessageBox()
        msg.setIcon(QtWidgets.QMessageBox.Information)
        #msg.setText("")
        msg.setInformativeText(str(text))
        msg.setWindowTitle("Warning")
        msg.exec_()

class Ui_billwin(object):
    def setupUi(self, loginwin, userinfo):
        loginwin.setObjectName("loginwin")
        loginwin.setFixedSize(1366, 768)
        loginwin.showMaximized()
        frameGm = QtWidgets.QMainWindow.frameGeometry(loginwin)

        screen = QtWidgets.QApplication.desktop().screenNumber(QtWidgets.QApplication.desktop().cursor().pos())
        centerPoint = QtWidgets.QApplication.desktop().screenGeometry(screen).center()
        frameGm.moveCenter(centerPoint)
        loginwin.move(frameGm.topLeft())
        loginwin.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        loginwin.setLayoutDirection(QtCore.Qt.LeftToRight)
        loginwin.setStyleSheet("background-color: rgb(199, 199, 199);")
        loginwin.setTabShape(QtWidgets.QTabWidget.Rounded)
        self.mobileno = userinfo[1]
        self.name = userinfo[0]
        self.address = userinfo[2]
        self.centralwidget = QtWidgets.QWidget(loginwin)
        self.centralwidget.setObjectName("centralwidget")
        self.logo1 = QtWidgets.QLabel(self.centralwidget)
        self.logo1.setGeometry(QtCore.QRect(1200,650, 71, 51))
        self.logo1.setText("")
        self.logo1.setPixmap(QtGui.QPixmap("logosmall.png"))
        self.logo1.setObjectName("logo1")
        self.labelm2 = QtWidgets.QLabel(self.centralwidget)
        self.labelm2.setGeometry(QtCore.QRect(430, -20, 101, 131))
        font = QtGui.QFont()
        font.setFamily("AR JULIAN")
        font.setPointSize(10)
        self.labelm2.setFont(font)
        self.labelm2.setText("")
        self.labelm2.setPixmap(QtGui.QPixmap("custsmalllogo.png"))
        self.labelm2.setObjectName("labelm2")
        self.label_2 = QtWidgets.QLabel(self.centralwidget)
        self.label_2.setGeometry(QtCore.QRect(690, 60, 311, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.label_2.setFont(font)
        self.label_2.setObjectName("label_2")
        self.label = QtWidgets.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(620, 20, 411, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(16)
        font.setBold(True)
        font.setWeight(75)
        self.label.setFont(font)
        self.label.setObjectName("label")
        self.graphicsView = QtWidgets.QGraphicsView(self.centralwidget)
        self.graphicsView.setGeometry(QtCore.QRect(170, 110, 1011, 601))
        self.graphicsView.setAutoFillBackground(False)
        self.graphicsView.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.graphicsView.setFrameShape(QtWidgets.QFrame.WinPanel)
        self.graphicsView.setFrameShadow(QtWidgets.QFrame.Plain)
        self.graphicsView.setLineWidth(5)
        self.graphicsView.setMidLineWidth(5)
        self.graphicsView.setObjectName("graphicsView")
        self.graphicsView_2 = QtWidgets.QGraphicsView(self.centralwidget)
        self.graphicsView_2.setGeometry(QtCore.QRect(200, 130, 321, 131))
        self.graphicsView_2.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                          "border-color: rgb(0, 0, 0);\n"
                                          "border-top-color: rgb(199, 199, 199);")
        self.graphicsView_2.setFrameShape(QtWidgets.QFrame.WinPanel)
        self.graphicsView_2.setFrameShadow(QtWidgets.QFrame.Plain)
        self.graphicsView_2.setLineWidth(5)
        self.graphicsView_2.setMidLineWidth(5)
        self.graphicsView_2.setObjectName("graphicsView_2")
        self.graphicsView_3 = QtWidgets.QGraphicsView(self.centralwidget)
        self.graphicsView_3.setGeometry(QtCore.QRect(200, 270, 321, 131))
        self.graphicsView_3.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.graphicsView_3.setFrameShape(QtWidgets.QFrame.WinPanel)
        self.graphicsView_3.setFrameShadow(QtWidgets.QFrame.Plain)
        self.graphicsView_3.setLineWidth(5)
        self.graphicsView_3.setMidLineWidth(5)
        self.graphicsView_3.setObjectName("graphicsView_3")
        self.graphicsView_4 = QtWidgets.QGraphicsView(self.centralwidget)
        self.graphicsView_4.setGeometry(QtCore.QRect(200, 410, 321, 101))
        self.graphicsView_4.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.graphicsView_4.setFrameShape(QtWidgets.QFrame.WinPanel)
        self.graphicsView_4.setFrameShadow(QtWidgets.QFrame.Plain)
        self.graphicsView_4.setLineWidth(5)
        self.graphicsView_4.setMidLineWidth(5)
        self.graphicsView_4.setObjectName("graphicsView_4")
        self.graphicsView_6 = QtWidgets.QGraphicsView(self.centralwidget)
        self.graphicsView_6.setGeometry(QtCore.QRect(200, 530, 951, 131))
        self.graphicsView_6.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.graphicsView_6.setFrameShape(QtWidgets.QFrame.WinPanel)
        self.graphicsView_6.setFrameShadow(QtWidgets.QFrame.Plain)
        self.graphicsView_6.setLineWidth(5)
        self.graphicsView_6.setMidLineWidth(5)
        self.graphicsView_6.setObjectName("graphicsView_6")
        self.label_3 = QtWidgets.QLabel(self.centralwidget)
        self.label_3.setGeometry(QtCore.QRect(205, 135, 311, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label_3.setFont(font)
        self.label_3.setObjectName("label_3")
        self.label_7 = QtWidgets.QLabel(self.centralwidget)
        self.label_7.setGeometry(QtCore.QRect(205, 275, 311, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label_7.setFont(font)
        self.label_7.setObjectName("label_7")
        self.label_10 = QtWidgets.QLabel(self.centralwidget)
        self.label_10.setGeometry(QtCore.QRect(205, 415, 311, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label_10.setFont(font)
        self.label_10.setObjectName("label_10")
        self.prodmenu = QtWidgets.QComboBox(self.centralwidget)
        self.prodmenu.setGeometry(QtCore.QRect(210, 170, 231, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.prodmenu.setFont(font)
        self.prodmenu.setAutoFillBackground(False)
        self.prodmenu.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                    "border-bottom-color: rgb(86, 86, 86);\n"
                                    "selection-background-color: rgb(158, 158, 158);\n"
                                    "border-color: rgb(200, 200, 200);\n"
                                    "\n"
                                    "")
        self.prodmenu.setObjectName("prodmenu")
        conn_p = sqlite3.connect('product.db')
        cursor_p = conn_p.execute("SELECT NAME from PRODUCT")
        list = []
        for row in cursor_p:
            list.append(row[0])
        self.prodmenu.addItems(list)

        conn_p.close()
        self.prodmenu.model().sort(0)
        self.label_4 = QtWidgets.QLabel(self.centralwidget)
        self.label_4.setGeometry(QtCore.QRect(210, 210, 171, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_4.setFont(font)
        self.label_4.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                   "border-color: rgb(136, 136, 136);")
        self.label_4.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.label_4.setObjectName("label_4")
        self.quantity = QtWidgets.QSpinBox(self.centralwidget)
        self.quantity.setGeometry(QtCore.QRect(370, 210, 71, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.quantity.setFont(font)
        self.quantity.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.quantity.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.quantity.setObjectName("quantity")
        self.quantity.setMinimum(1)
        self.addprod = QtWidgets.QPushButton(self.centralwidget)
        self.addprod.setGeometry(QtCore.QRect(460, 190, 41, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.addprod.setFont(font)
        self.addprod.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.addprod.setObjectName("addprod")
        self.addprod.clicked.connect(self.table_update)
        self.bg1 = QtWidgets.QButtonGroup(self.centralwidget)
        self.bg2 = QtWidgets.QButtonGroup(self.centralwidget)
        self.cash = QtWidgets.QRadioButton(self.centralwidget)
        self.cash.setGeometry(QtCore.QRect(230, 310, 251, 21))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.cash.setFont(font)
        self.cash.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.cash.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.cash.setObjectName("cash")
        self.card = QtWidgets.QRadioButton(self.centralwidget)
        self.card.setGeometry(QtCore.QRect(230, 340, 251, 21))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.card.setFont(font)
        self.card.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.card.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.card.setObjectName("card")
        self.upi = QtWidgets.QRadioButton(self.centralwidget)
        self.upi.setGeometry(QtCore.QRect(230, 370, 251, 21))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.upi.setFont(font)
        self.upi.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.upi.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.upi.setObjectName("upi")
        self.homedel = QtWidgets.QRadioButton(self.centralwidget)
        self.homedel.setGeometry(QtCore.QRect(230, 480, 251, 21))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.homedel.setFont(font)
        self.homedel.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.homedel.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.homedel.setObjectName("homedel")
        self.carryout = QtWidgets.QRadioButton(self.centralwidget)
        self.carryout.setGeometry(QtCore.QRect(230, 450, 251, 21))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.carryout.setFont(font)
        self.carryout.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.carryout.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.carryout.setObjectName("carryout")
        self.bg1.addButton(self.card)
        self.bg1.addButton(self.cash)
        self.bg1.addButton(self.upi)
        self.bg2.addButton(self.carryout)
        self.bg2.addButton(self.homedel)
        #self.bg1.setExclusive(False)
        #self.bg2.setExclusive(False)

        self.line = QtWidgets.QFrame(self.centralwidget)
        self.line.setGeometry(QtCore.QRect(780, 535, 91, 121))
        self.line.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                "border-color: rgb(4, 4, 4);")
        self.line.setFrameShadow(QtWidgets.QFrame.Plain)
        self.line.setLineWidth(3)
        self.line.setFrameShape(QtWidgets.QFrame.VLine)
        self.line.setObjectName("line")
        self.tableWidget = QtWidgets.QTableWidget(self.centralwidget)
        self.tableWidget.setGeometry(QtCore.QRect(540, 130, 611, 341))
        self.tableWidget.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.tableWidget.setFrameShape(QtWidgets.QFrame.WinPanel)
        self.tableWidget.setFrameShadow(QtWidgets.QFrame.Plain)
        self.tableWidget.setLineWidth(5)
        self.tableWidget.setShowGrid(False)
        self.tableWidget.setGridStyle(QtCore.Qt.CustomDashLine)
        self.tableWidget.setRowCount(0)
        self.tableWidget.setObjectName("tableWidget")
        self.tableWidget.setColumnCount(6)
        item = QtWidgets.QTableWidgetItem()
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        item.setFont(font)
        self.tableWidget.setHorizontalHeaderItem(0, item)
        item = QtWidgets.QTableWidgetItem()
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        item.setFont(font)
        self.tableWidget.setHorizontalHeaderItem(1, item)
        item = QtWidgets.QTableWidgetItem()
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        item.setFont(font)
        self.tableWidget.setHorizontalHeaderItem(2, item)
        item = QtWidgets.QTableWidgetItem()
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        item.setFont(font)
        self.tableWidget.setHorizontalHeaderItem(3, item)
        item = QtWidgets.QTableWidgetItem()
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        item.setFont(font)
        self.tableWidget.setHorizontalHeaderItem(4, item)
        item = QtWidgets.QTableWidgetItem()
        self.tableWidget.setHorizontalHeaderItem(5, item)
        self.tableWidget.horizontalHeader().setVisible(True)
        self.tableWidget.horizontalHeader().setDefaultSectionSize(100)
        self.tableWidget.horizontalHeader().setHighlightSections(True)
        self.tableWidget.horizontalHeader().setMinimumSectionSize(10)
        self.tableWidget.verticalHeader().setVisible(False)
        self.line_2 = QtWidgets.QFrame(self.centralwidget)
        self.line_2.setGeometry(QtCore.QRect(630, 134, 20, 331))
        self.line_2.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                  "border-color: rgb(4, 4, 4);")
        self.line_2.setFrameShadow(QtWidgets.QFrame.Plain)
        self.line_2.setLineWidth(3)
        self.line_2.setFrameShape(QtWidgets.QFrame.VLine)
        self.line_2.setObjectName("line_2")
        self.line_3 = QtWidgets.QFrame(self.centralwidget)
        self.line_3.setGeometry(QtCore.QRect(730, 134, 20, 331))
        self.line_3.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                  "border-color: rgb(4, 4, 4);")
        self.line_3.setFrameShadow(QtWidgets.QFrame.Plain)
        self.line_3.setLineWidth(3)
        self.line_3.setFrameShape(QtWidgets.QFrame.VLine)
        self.line_3.setObjectName("line_3")
        self.line_4 = QtWidgets.QFrame(self.centralwidget)
        self.line_4.setGeometry(QtCore.QRect(830, 134, 20, 331))
        self.line_4.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                  "border-color: rgb(4, 4, 4);")
        self.line_4.setFrameShadow(QtWidgets.QFrame.Plain)
        self.line_4.setLineWidth(3)
        self.line_4.setFrameShape(QtWidgets.QFrame.VLine)
        self.line_4.setObjectName("line_4")
        self.line_5 = QtWidgets.QFrame(self.centralwidget)
        self.line_5.setGeometry(QtCore.QRect(930, 134, 20, 331))
        self.line_5.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                  "border-color: rgb(4, 4, 4);")
        self.line_5.setFrameShadow(QtWidgets.QFrame.Plain)
        self.line_5.setLineWidth(3)
        self.line_5.setFrameShape(QtWidgets.QFrame.VLine)
        self.line_5.setObjectName("line_5")
        self.pushButton_2 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_2.setGeometry(QtCore.QRect(1090, 490, 41, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton_2.setFont(font)
        self.pushButton_2.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.pushButton_2.setFlat(False)
        self.pushButton_2.setObjectName("pushButton_2")
        self.pushButton_2.clicked.connect(self.delete_chkbox)
        self.label_5 = QtWidgets.QLabel(self.centralwidget)
        self.label_5.setGeometry(QtCore.QRect(220, 540, 181, 21))
        self.label_5.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                   "border-color: rgb(136, 136, 136);")
        self.label_5.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.label_5.setObjectName("label_5")
        self.label_6 = QtWidgets.QLabel(self.centralwidget)
        self.label_6.setGeometry(QtCore.QRect(220, 570, 221, 21))
        self.label_6.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                   "border-color: rgb(136, 136, 136);")
        self.label_6.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.label_6.setObjectName("label_6")
        self.label_8 = QtWidgets.QLabel(self.centralwidget)
        self.label_8.setGeometry(QtCore.QRect(220, 600, 181, 21))
        self.label_8.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                   "border-color: rgb(136, 136, 136);")
        self.label_8.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.label_8.setObjectName("label_8")
        #self.label_11 = QtWidgets.QLabel(self.centralwidget)
        #self.label_11.setGeometry(QtCore.QRect(840, 540, 91, 21))
        #self.label_11.setStyleSheet("background-color: rgb(255, 255, 255);\n"
        #                            "border-color: rgb(136, 136, 136);")
        #self.label_11.setFrameShape(QtWidgets.QFrame.NoFrame)
        #self.label_11.setObjectName("label_11")
        #self.label_12 = QtWidgets.QLabel(self.centralwidget)
        #self.label_12.setGeometry(QtCore.QRect(840, 570, 91, 21))
        #self.label_12.setStyleSheet("background-color: rgb(255, 255, 255);\n"
        #                            "border-color: rgb(136, 136, 136);")
        #self.label_12.setFrameShape(QtWidgets.QFrame.NoFrame)
        #self.label_12.setObjectName("label_12")
        #self.label_13 = QtWidgets.QLabel(self.centralwidget)
        #self.label_13.setGeometry(QtCore.QRect(840, 600, 91, 21))
        #self.label_13.setStyleSheet("background-color: rgb(255, 255, 255);\n"
        #                            "border-color: rgb(136, 136, 136);")
        #self.label_13.setFrameShape(QtWidgets.QFrame.NoFrame)
        #self.label_13.setObjectName("label_13")
        self.label_14 = QtWidgets.QLabel(self.centralwidget)
        self.label_14.setGeometry(QtCore.QRect(830, 630, 105, 21))
        self.label_14.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                    "border-color: rgb(136, 136, 136);")
        self.label_14.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.label_14.setObjectName("label_14")
        self.line_7 = QtWidgets.QFrame(self.centralwidget)
        self.line_7.setGeometry(QtCore.QRect(930, 535, 16, 121))
        self.line_7.setStyleSheet("background-color: rgb(255, 255, 255);\n"
                                  "border-color: rgb(4, 4, 4);")
        self.line_7.setFrameShadow(QtWidgets.QFrame.Plain)
        self.line_7.setLineWidth(1)
        self.line_7.setFrameShape(QtWidgets.QFrame.VLine)
        self.line_7.setObjectName("line_7")
        self.generate = QtWidgets.QPushButton(self.centralwidget)
        self.generate.setGeometry(QtCore.QRect(600, 670, 171, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(11)
        font.setBold(True)
        font.setWeight(75)
        self.generate.setFont(font)
        self.generate.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.generate.setFlat(False)
        self.generate.setObjectName("generate")
        self.generate.clicked.connect(lambda:self.invoice(loginwin))
        self.custname = QtWidgets.QLineEdit(self.centralwidget)
        self.custname.setGeometry(QtCore.QRect(440, 540, 241, 21))
        self.custname.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.custname.setObjectName("custname")
        self.custname.setText(str(self.name))
        self.custname.setReadOnly(True)
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.custname.setFont(font)
        self.custnumber = QtWidgets.QLineEdit(self.centralwidget)
        self.custnumber.setGeometry(QtCore.QRect(440, 570, 241, 21))
        self.custnumber.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.custnumber.setObjectName("custnumber")
        self.custnumber.setText(str(self.mobileno))
        self.custnumber.setReadOnly(True)
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.custnumber.setFont(font)
        self.custaddress = QtWidgets.QTextEdit(self.centralwidget)
        self.custaddress.setGeometry(QtCore.QRect(440, 600, 241, 51))
        self.custaddress.setStyleSheet("background-color: rgb(255, 255, 255);")
        self.custaddress.setObjectName("custaddress")
        self.custaddress.setText(str(self.address))
        self.custaddress.setReadOnly(True)
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(8)
        font.setBold(True)
        font.setWeight(75)
        self.custaddress.setFont(font)
        #self.line_8 = QtWidgets.QFrame(self.centralwidget)
        #self.line_8.setGeometry(QtCore.QRect(550, 150, 591, 12))
        #self.line_8.setStyleSheet("background-color: rgb(255, 255, 255);\n"
         #                         "border-color: rgb(4, 4, 4);")
        #self.line_8.setFrameShadow(QtWidgets.QFrame.Plain)
        #self.line_8.setLineWidth(1)
        #self.line_8.setFrameShape(QtWidgets.QFrame.HLine)
        #self.line_8.setObjectName("line_8")
        #self.nettotal = QtWidgets.QLabel(self.centralwidget)
        #self.nettotal.setGeometry(QtCore.QRect(1000, 540, 91, 21))
        #font = QtGui.QFont()
        #font.setFamily("Arial")
        #font.setPointSize(9)
        #font.setBold(True)
        #font.setWeight(75)
        #self.nettotal.setFont(font)
        #self.nettotal.setText("")
        #self.nettotal.setAlignment(QtCore.Qt.AlignCenter)
        #self.nettotal.setObjectName("nettotal")
        #self.sgst = QtWidgets.QLabel(self.centralwidget)
        #self.sgst.setGeometry(QtCore.QRect(1000, 570, 91, 20))
        #font = QtGui.QFont()
        #font.setFamily("Arial")
        #ont.setPointSize(9)
        #font.setBold(True)
        #font.setWeight(75)
        #self.sgst.setFont(font)
        #self.sgst.setText("")
        #self.sgst.setAlignment(QtCore.Qt.AlignCenter)
        #self.sgst.setObjectName("sgst")
        #self.cgst = QtWidgets.QLabel(self.centralwidget)
        #self.cgst.setGeometry(QtCore.QRect(1000, 600, 91, 20))
        #font = QtGui.QFont()
        #font.setFamily("Arial")
        #font.setPointSize(9)
        #font.setBold(True)
        #font.setWeight(75)
        #self.cgst.setFont(font)
        #self.cgst.setText("")
        #self.cgst.setAlignment(QtCore.Qt.AlignCenter)
        #self.cgst.setObjectName("cgst")
        self.totalamt = QtWidgets.QLabel(self.centralwidget)
        self.totalamt.setGeometry(QtCore.QRect(1000, 630, 91, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.totalamt.setFont(font)
        self.totalamt.setText("")
        self.totalamt.setAlignment(QtCore.Qt.AlignCenter)
        self.totalamt.setObjectName("totalamt")

        loginwin.setCentralWidget(self.centralwidget)

        self.retranslateUi(loginwin)
        QtCore.QMetaObject.connectSlotsByName(loginwin)

    def retranslateUi(self, loginwin):
        _translate = QtCore.QCoreApplication.translate
        loginwin.setWindowTitle(_translate("loginwin", "KANAK-Billing"))
        self.label_2.setText(_translate("loginwin",
                                        "<html><head/><body><p><span style=\" font-size:12pt; color:#437aad;\">Fresh &amp; Clean</span></p></body></html>"))
        self.label.setText(_translate("loginwin",
                                      "<html><head/><body><p><span style=\" font-size:18pt; color:#437aad;\">HOUSE OF SEA FOOD</span></p></body></html>"))
        self.label_3.setText(_translate("loginwin",
                                        "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt;\">Product Selector</span></p></body></html>"))
        self.label_7.setText(_translate("loginwin",
                                        "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\">\n"
                                        "<html><head><meta name=\"qrichtext\" content=\"1\" /><style type=\"text/css\">\n"
                                        "p, li { white-space: pre-wrap; }\n"
                                        "</style></head><body style=\" font-family:\'Arial\'; font-size:14pt; font-weight:600; font-style:normal;\">\n"
                                        "<p align=\"center\" style=\" margin-top:12px; margin-bottom:12px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\"><span style=\" font-size:12pt;\">Payment Mode</span></p></body></html>"))
        self.label_10.setText(_translate("loginwin",
                                         "<html><head/><body><p align=\"center\"><span style=\" font-size:12pt;\">Delivery Mode</span></p></body></html>"))
        self.prodmenu.setWhatsThis(_translate("loginwin", "<html><head/><body><p>Product Name</p></body></html>"))
        self.label_4.setText(_translate("loginwin", "<html><head/><body><p>Enter Quantity (Kgs):</p></body></html>"))
        self.addprod.setText(_translate("loginwin", "+"))
        self.cash.setText(_translate("loginwin", "Cash"))
        self.card.setText(_translate("loginwin", "Credit / Debit Card"))
        self.upi.setText(_translate("loginwin", "UPI"))
        self.homedel.setText(_translate("loginwin", "Home Delivery"))
        self.carryout.setText(_translate("loginwin", "Carry Out"))
        item = self.tableWidget.horizontalHeaderItem(0)
        item.setText(_translate("loginwin", "SNo"))
        item = self.tableWidget.horizontalHeaderItem(1)
        item.setText(_translate("loginwin", "Product"))
        item = self.tableWidget.horizontalHeaderItem(2)
        item.setText(_translate("loginwin", "Quantity"))
        item = self.tableWidget.horizontalHeaderItem(3)
        item.setText(_translate("loginwin", "Rate"))
        item = self.tableWidget.horizontalHeaderItem(4)
        item.setText(_translate("loginwin", "Price"))
        self.pushButton_2.setText(_translate("loginwin", "DEL"))
        self.label_5.setText(_translate("loginwin",
                                        "<html><head/><body><p><span style=\" font-size:10pt; font-weight:600;\">Customer Name:</span></p><p><br/></p></body></html>"))
        self.label_6.setText(_translate("loginwin",
                                        "<html><head/><body><p><span style=\" font-size:10pt; font-weight:600;\">Customer Contact Number:</span></p></body></html>"))
        self.label_8.setText(_translate("loginwin",
                                        "<html><head/><body><p><span style=\" font-size:10pt; font-weight:600;\">Customer Address:</span></p></body></html>"))
        #self.label_11.setText(_translate("loginwin",
        #                                 "<html><head/><body><p><span style=\" font-size:10pt; font-weight:600;\">Net Total</span></p></body></html>"))
       # self.label_12.setText(_translate("loginwin",
       #                                  "<html><head/><body><p><span style=\" font-size:10pt; font-weight:600;\">SGST (2.5%)</span></p></body></html>"))
        #self.label_13.setText(_translate("loginwin",
        #                                 "<html><head/><body><p><span style=\" font-size:10pt; font-weight:600;\">CGST (2.5%)</span></p></body></html>"))
        self.label_14.setText(_translate("loginwin",
                                         "<html><head/><body><p><span style=\" font-size:10pt; font-weight:600;\">Grand Total</span></p></body></html>"))
        self.generate.setText(_translate("loginwin", "Generate Invoice"))

    def table_update(self):
        conn_p = sqlite3.connect('product.db')
        self.currentRowCount = self.tableWidget.rowCount()
        self.sno = self.currentRowCount + 1
        self.product = self.prodmenu.currentText()
        self.quant = self.quantity.value()
        cursor_p = conn_p.execute("SELECT PRICE from PRODUCT where NAME =?",(self.product,))
        for row in cursor_p:
            self.rate = row[0]
        self.price = self.rate * self.quant
        self.tableWidget.insertRow(self.currentRowCount)

        conn_p.close()

        snoitem = QtWidgets.QTableWidgetItem(str(self.sno))
        snoitem.setTextAlignment(QtCore.Qt.AlignCenter)
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        snoitem.setFont(font)
        self.tableWidget.setItem(self.currentRowCount, 0, snoitem)

        proditem = QtWidgets.QTableWidgetItem(str(self.product))
        proditem.setTextAlignment(QtCore.Qt.AlignCenter)
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(8)
        font.setBold(True)
        proditem.setFont(font)
        self.tableWidget.setItem(self.currentRowCount, 1, proditem)

        qtyitem = QtWidgets.QTableWidgetItem(str(self.quant))
        qtyitem.setTextAlignment(QtCore.Qt.AlignCenter)
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        qtyitem.setFont(font)
        self.tableWidget.setItem(self.currentRowCount, 2, qtyitem)

        rtitem = QtWidgets.QTableWidgetItem(str(self.rate))
        rtitem.setTextAlignment(QtCore.Qt.AlignCenter)
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        rtitem.setFont(font)
        self.tableWidget.setItem(self.currentRowCount, 3, rtitem)

        pritem = QtWidgets.QTableWidgetItem(str(self.price))
        pritem.setTextAlignment(QtCore.Qt.AlignCenter)
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        pritem.setFont(font)
        self.tableWidget.setItem(self.currentRowCount, 4, pritem)

        self.chkbox = QtWidgets.QTableWidgetItem(str(self.currentRowCount))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(1)
        font.setBold(False)
        self.chkbox.setFont(font)
        self.chkbox.setFlags(QtCore.Qt.ItemIsUserCheckable | QtCore.Qt.ItemIsEnabled)
        self.chkbox.setCheckState(QtCore.Qt.Unchecked)
        self.tableWidget.setItem(self.currentRowCount, 5, self.chkbox)
        self.sum()

    def delete_chkbox(self):
        try:
            selected = []
            for i in range(self.tableWidget.rowCount()):
                item = self.tableWidget.item(i, 5)
                if item.checkState():
                    selected.append(i)
            self.tableWidget.removeRow(selected[0])
            for i in range(len(selected) - 1):
                self.tableWidget.removeRow(selected[i + 1] - (i + 1))
            self.sum()
            self.sno_sort()
        except:
            msg = QtWidgets.QMessageBox()
            msg.setIcon(QtWidgets.QMessageBox.Information)
            msg.setText("Warning!")
            msg.setInformativeText("Items not selected")
            msg.setWindowTitle("Warning!")
            msg.exec_()

    def sno_sort(self):
        for i in range(self.tableWidget.rowCount()):
            snoitem = QtWidgets.QTableWidgetItem(str(i + 1))
            snoitem.setTextAlignment(QtCore.Qt.AlignCenter)
            font = QtGui.QFont()
            font.setFamily("Arial")
            font.setPointSize(9)
            font.setBold(True)
            snoitem.setFont(font)
            self.tableWidget.setItem(i, 0, snoitem)

    def sum(self):
        total = 0
        if self.tableWidget.rowCount() == 0:
            #self.nettotal.setText('')
            #self.nettotal.setText('')
            #self.cgst.setText('')
            #self.sgst.setText('')
            self.totalamt.setText('')

        else:
            for i in range(self.tableWidget.rowCount()):
                amount = self.tableWidget.item(i, 4).text()
                total = total + int(amount)
            #sgst = total * 0.025
            #cgst = total * 0.025
            #grandtotal = total + sgst + cgst
            #self.nettotal.setText(str(total))
            #self.cgst.setText(str(cgst))
            #self.sgst.setText(str(sgst))
            self.totalamt.setText(str(total))

    def invoice(self,loginwin):
        try:
            file = QtWidgets.QFileDialog()
            fileloc = file.getExistingDirectory(file,caption='Select Directory')

            if fileloc =="":
                msg = QtWidgets.QMessageBox()
                msg.setIcon(QtWidgets.QMessageBox.Information)
                msg.setText("Warning!")
                msg.setInformativeText("Select a folder!")
                msg.setWindowTitle("Warning")
                msg.exec_()
            elif self.tableWidget.rowCount() == 0:
                msg = QtWidgets.QMessageBox()
                msg.setIcon(QtWidgets.QMessageBox.Information)
                msg.setText("Warning!")
                msg.setInformativeText("No Items Selected!")
                msg.setWindowTitle("Warning")
                msg.exec_()
            elif self.tableWidget.rowCount() > 15:
                self.messagewindow2("Select Less than 15 Products")
            else:

                today = date.today()
                self.todaysdate = today.strftime("%B %d, %Y")
                conn_d = sqlite3.connect('data.db')
                cursor_d = conn_d.execute("SELECT * from DATA where DATE=?",(self.todaysdate,))
                row = []
                for rows in cursor_d:
                    row.append(rows)
                if len(row) == 0:
                    row.append(1)
                conn_d.close()
                format(len(row), '02')
                invoicepart = today.strftime("%d%m%y")
                self.invoiceid = invoicepart + str(len(row))
                filename = self.invoiceid +  '_' + self.custname.text() +'.pdf'
                self.savefileloc = os.path.join(fileloc,filename)
                self.purchasedata()
                # Creating Canvas
                c = canvas.Canvas(self.savefileloc, pagesize=(200, 300), bottomup=0)
                # Logo Section
                # Setting th origin to (10,40)
                c.translate(10, 40)
                # Inverting the scale for getting mirror Image of logo
                c.scale(1, -1)
                # Inserting Logo into the Canvas at required position
                c.drawImage("invoicelogo.png", 0, -15, width=50, height=30)
                # Title Section
                # Again Inverting Scale For strings insertion
                c.scale(1, -1)
                # Again Setting the origin back to (0,0) of top-left
                c.translate(-10, -35)
                c.setFont("Courier-Bold", 7)

                c.drawCentredString(100, 25, "INVOICE")
                # Setting the font for Name title of company
                c.setFont("Helvetica-Bold", 4)
                # Inserting the name of the company
                c.setFillColorRGB(0, 0, 1)
                c.drawRightString(185, 42, "House of Sea Food")
                c.setFillColorRGB(0, 0, 0)
                # For under lining the title
                # c.line(75,22,152,22)
                # Changing the font size for Specifying Address
                c.setFont("Helvetica-Bold", 3)
                temp = "Invoice ID:" + self.invoiceid
                c.drawString(20, 57, temp)
                c.drawRightString(185, 47, "Chennai")
                c.drawRightString(185, 52, "TN - 600041, India")
                # Changing the font size for Specifying GST Number of firm
                c.setFont("Helvetica-Bold", 3)
                c.drawRightString(185, 57, "Phone : 9940317193")
                # Line Seprating the page header from the body
                # c.line(5,60,195,60)
                # Document Information
                # Changing the font for Document title

                # This Block Consist of Costumer Details
                c.setLineWidth(0.2)
                c.roundRect(15, 63, 170, 40, 0, stroke=1, fill=0)
                c.setFont("Times-Bold", 3)
                c.drawRightString(158, 35, "Date:")
                c.drawRightString(185, 35, self.todaysdate)
                c.setFont("Times-Bold", 4)

                c.drawString(20, 67, "Customer Name:")
                c.drawString(20, 75, "Customer Address:")
                c.drawString(20, 87, "Phone Number:")
                c.drawString(20, 94, "Mode of Payment:")
                c.drawString(20, 101, "Mode of Delivery:")
                c.line(55, 63, 55, 103)
                c.setFont("Times-Bold", 4)
                c.drawString(60, 67,self.custname.text())
                c.setFont("Times-Bold", 3)
                if len(self.custaddress.toPlainText())>= 66:
                    text = self.custaddress.toPlainText()
                    c.drawString(60,74, text[:65] + '-')
                    c.drawString(60,80,text[65:])
                else:
                    c.drawString(60, 75, self.custaddress.toPlainText())
                print(len(self.custaddress.toPlainText()))
                c.setFont("Times-Bold", 4)
                c.drawString(60, 87,self.custnumber.text())
                c.drawString(60, 94,self.modeofpay)
                c.drawString(60, 101,self.modeofdel)
                # This Block Consist of Item Description
                c.roundRect(15,108,170,160,0,stroke=1,fill=0)
                c.line(15, 120, 185, 120)
                c.drawCentredString(25, 118, "SNo.")
                c.drawCentredString(75, 118, "PRODUCT")
                c.drawCentredString(122, 118, "RATE")
                c.drawCentredString(148, 118, "QTY")
                c.drawCentredString(173, 118, "TOTAL")
                i = 128

                for row in range(self.tableWidget.rowCount()):
                    sno = self.tableWidget.item(row,0).text()
                    product = self.tableWidget.item(row, 1).text()
                    amount = self.tableWidget.item(row, 3).text()
                    quantity = self.tableWidget.item(row, 2).text()
                    total = self.tableWidget.item(row, 4).text()
                    c.drawCentredString(25,i,sno)
                    c.drawCentredString(75, i, product)
                    c.drawCentredString(125, i, amount)
                    c.drawCentredString(148, i, quantity)
                    c.drawCentredString(173,i,total)
                    i = i+7
                # Drawing table for Item Description
                # c.line(15,210,185,210)
                c.line(35, 108, 35, 230)
                c.line(110, 108, 110, 230)
                c.line(135, 108, 135, 230)
                c.line(160, 108, 160, 230)

                c.line(15, 230, 185, 230)
                c.line(110, 230, 110, 240)

                c.setFont("Times-Bold", 4)
                #c.drawString(115, 225, "Net Amount:")
                c#.drawString(155, 225, self.nettotal.text())
               #c.drawString(115, 232, "CGST(2.5%):")
                #c.drawString(155, 232, self.cgst.text())
                #c.drawString(115, 239, "SGST(2.5%):")
                #c.drawString(155, 239, self.sgst.text())
                c.drawString(125, 238, "Grand Total:")
                c.drawString(165, 238, self.totalamt.text())

                # Declaration and Signature
                c.line(15, 240, 185, 240)
                c.line(110, 240, 110, 268)

                c.setFont("Times-Bold", 4)
                c.drawString(20, 250, "We declare that above mentioned")
                c.drawString(20, 255, "information is true.")
                c.drawString(20, 260, "(This is a system generated invoice)")
                c.drawRightString(180, 260, "Authorised Signatory")
                # End the Page and Start with new
                #c.showPage()
                # Saving the PDF
                c.save()
                self.messagewindow(loginwin,"Invoice Generated and Saved")
        except Exception as e:
            self.messagewindow(loginwin,str(e))

    def purchasedata(self):
        if self.upi.isChecked() == True:
            self.modeofpay = self.upi.text()
        elif self.cash.isChecked() == True:
            self.modeofpay = self.cash.text()
        elif self.card.isChecked() == True:
            self.modeofpay = self.card.text()
        else:
            self.modeofpay = ""

        if self.homedel.isChecked() == True:
            self.modeofdel = self.homedel.text()
        elif self.carryout.isChecked() == True:
            self.modeofdel = self.carryout.text()
        else:
            self.modeofdel = ""
        product_list = []
        for row in range(self.tableWidget.rowCount()):
            product = self.tableWidget.item(row, 1).text()
            quantity = self.tableWidget.item(row, 2).text()
            product_list_str = product+'_('+str(quantity)+'kg(s)'+')'
            product_list.append(product_list_str)

        conn_d = sqlite3.connect('data.db')
        conn_d.execute("INSERT INTO DATA (ORDER_ID,DATE,CUSTOMER_NAME,CUSTOMER_NUMBER,ORDER_DETAILS,NumOfProducts,MODEOFPAY,MODEOFDEL,TOTALAMT) VALUES (?,?,?,?,?,?,?,?,?)",
                            (self.invoiceid,self.todaysdate,self.custname.text(),self.custnumber.text(),
                             ','.join(product_list),self.tableWidget.rowCount(),self.modeofpay,
                             self.modeofdel,self.totalamt.text()))
        conn_d.commit()
        conn_d.close()

    def messagewindow(self, loginwin,text):
        msg = QtWidgets.QMessageBox()
        msg.setIcon(QtWidgets.QMessageBox.Information)
        #msg.setText("Message!")
        msg.setInformativeText(text)
        msg.setWindowTitle("Message")
        msg.exec_()
        loginwin.hide()

    def messagewindow2(self,text):
        msg = QtWidgets.QMessageBox()
        msg.setIcon(QtWidgets.QMessageBox.Information)
        #msg.setText("")
        msg.setInformativeText(str(text))
        msg.setWindowTitle("Warning")
        msg.exec_()

class Ui_newcustwin(object):
    def setupUi(self, MainWindow, phno):
        MainWindow.setObjectName("MainWindow")
        MainWindow.setFixedSize(767, 445)
        self.mobileno = phno
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.label = QtWidgets.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(250, 60, 371, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label.setFont(font)
        self.label.setObjectName("label")
        self.label_2 = QtWidgets.QLabel(self.centralwidget)
        self.label_2.setGeometry(QtCore.QRect(160, 140, 181, 20))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.label_2.setFont(font)
        self.label_2.setObjectName("label_2")
        self.label_3 = QtWidgets.QLabel(self.centralwidget)
        self.label_3.setGeometry(QtCore.QRect(160, 210, 231, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.label_3.setFont(font)
        self.label_3.setObjectName("label_3")
        self.label_4 = QtWidgets.QLabel(self.centralwidget)
        self.label_4.setGeometry(QtCore.QRect(160, 280, 201, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(10)
        font.setBold(True)
        font.setWeight(75)
        self.label_4.setFont(font)
        self.label_4.setObjectName("label_4")
        self.custname = QtWidgets.QLineEdit(self.centralwidget)
        self.custname.setGeometry(QtCore.QRect(390, 140, 211, 31))
        self.custname.setObjectName("custname")
        self.custmobile = QtWidgets.QLineEdit(self.centralwidget)
        self.custmobile.setGeometry(QtCore.QRect(392, 210, 211, 31))
        self.custmobile.setObjectName("custmobile")
        self.custmobile.setText(self.mobileno)
        self.custaddress = QtWidgets.QTextEdit(self.centralwidget)
        self.custaddress.setGeometry(QtCore.QRect(390, 280, 211, 81))
        self.custaddress.setObjectName("custaddress")
        self.pushButton = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton.setGeometry(QtCore.QRect(350, 390, 75, 21))
        self.pushButton.clicked.connect(lambda:self.update_user(MainWindow))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setBold(True)
        font.setWeight(75)
        self.pushButton.setFont(font)
        self.pushButton.setCursor(QtGui.QCursor(QtCore.Qt.PointingHandCursor))
        self.pushButton.setObjectName("pushButton")
        MainWindow.setCentralWidget(self.centralwidget)

        self.retranslateUi(MainWindow)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "KANAK-New Customer"))
        self.label.setText(_translate("MainWindow", "New Customer? Fill the details below! "))
        self.label_2.setText(_translate("MainWindow", "Customer Name:"))
        self.label_3.setText(_translate("MainWindow", "Customer Phone Number:"))
        self.label_4.setText(_translate("MainWindow", "Customer Address:"))
        self.pushButton.setText(_translate("MainWindow", "Continue"))

    def update_user(self,mainwindow):
        #with open('users.db','w+') as f:
        conn_u = sqlite3.connect('users.db')
        inname = self.custname.text()
        inmob = self.custmobile.text()
        inadd = self.custaddress.toPlainText()
        inadd = inadd.replace('\n',', ')
        if len(inname.strip())==0 or len(inmob.strip())==0 or len(inadd.strip())==0:
            self.messagewindow("Enter the details")
        elif len(inadd) > 130:
            self.messagewindow("Address Charatcter Limit Exceeded")
        else:
            conn_u.execute("INSERT INTO USER (NAME,MOBILE,ADDRESS) VALUES (?,?,?)",
                                (inname,inmob,inadd))
            conn_u.commit()
            conn_u.close()
            list = [inname,inmob,inadd]
            self.openbillwin(list,mainwindow)

    def openbillwin(self,list,mainwindow):
        window = QtWidgets.QMainWindow()
        billwin = Ui_billwin()
        billwin.setupUi(window,list)
        mainwindow.hide()
        window.show()

    def messagewindow(self,text):
        msg = QtWidgets.QMessageBox()
        msg.setIcon(QtWidgets.QMessageBox.Information)
        #msg.setText("")
        msg.setInformativeText(str(text))
        msg.setWindowTitle("Warning")
        msg.exec_()

class Ui_update(object):

    def setupUi(self, MainWindow):
        MainWindow.setObjectName("MainWindow")
        MainWindow.setFixedSize(1187, 826)
        #frameGm = QtWidgets.QMainWindow.frameGeometry(MainWindow)

        #screen = QtWidgets.QApplication.desktop().screenNumber(QtWidgets.QApplication.desktop().cursor().pos())
        #centerPoint = QtWidgets.QApplication.desktop().screenGeometry(screen).center()
        #frameGm.moveCenter(centerPoint)
        #MainWindow.move(frameGm.topLeft())
        self.centralwidget = QtWidgets.QWidget(MainWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.label = QtWidgets.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(510, 30, 251, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label.setFont(font)
        self.label.setObjectName("label")
        self.label_2 = QtWidgets.QLabel(self.centralwidget)
        self.label_2.setGeometry(QtCore.QRect(70, 90, 141, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_2.setFont(font)
        self.label_2.setObjectName("label_2")
        self.editprod = QtWidgets.QComboBox(self.centralwidget)
        self.editprod.setGeometry(QtCore.QRect(220, 100, 171, 22))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.editprod.setFont(font)
        self.editprod.setObjectName("editprod")
        self.label_3 = QtWidgets.QLabel(self.centralwidget)
        self.label_3.setGeometry(QtCore.QRect(710, 90, 131, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_3.setFont(font)
        self.label_3.setObjectName("label_3")
        self.editnewprice = QtWidgets.QLineEdit(self.centralwidget)
        self.editnewprice.setGeometry(QtCore.QRect(860, 100, 81, 20))
        self.editnewprice.setObjectName("editnewprice")
        self.editprodupdate = QtWidgets.QPushButton(self.centralwidget)
        self.editprodupdate.setGeometry(QtCore.QRect(1020, 100, 91, 23))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.editprodupdate.setFont(font)
        self.editprodupdate.setObjectName("editprodupdate")
        self.label_4 = QtWidgets.QLabel(self.centralwidget)
        self.label_4.setGeometry(QtCore.QRect(430, 90, 111, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_4.setFont(font)
        self.label_4.setObjectName("label_4")
        self.currentprice = QtWidgets.QLineEdit(self.centralwidget)
        self.currentprice.setGeometry(QtCore.QRect(570, 100, 81, 20))
        self.currentprice.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        self.currentprice.setObjectName("currentprice")
        self.label_5 = QtWidgets.QLabel(self.centralwidget)
        self.label_5.setGeometry(QtCore.QRect(510, 170, 211, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label_5.setFont(font)
        self.label_5.setObjectName("label_5")
        self.label_6 = QtWidgets.QLabel(self.centralwidget)
        self.label_6.setGeometry(QtCore.QRect(170, 240, 111, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_6.setFont(font)
        self.label_6.setObjectName("label_6")
        self.addprod = QtWidgets.QLineEdit(self.centralwidget)
        self.addprod.setGeometry(QtCore.QRect(300, 250, 181, 20))
        #self.addprod.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        self.addprod.setObjectName("addprod")
        self.label_7 = QtWidgets.QLabel(self.centralwidget)
        self.label_7.setGeometry(QtCore.QRect(550, 240, 111, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_7.setFont(font)
        self.label_7.setObjectName("label_7")
        self.addprodprice = QtWidgets.QLineEdit(self.centralwidget)
        self.addprodprice.setGeometry(QtCore.QRect(690, 250, 81, 20))
        self.addprodprice.setObjectName("addprodprice")
        self.addprodupdate = QtWidgets.QPushButton(self.centralwidget)
        self.addprodupdate.setGeometry(QtCore.QRect(880, 250, 91, 23))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.addprodupdate.setFont(font)
        self.addprodupdate.setObjectName("addprodupdate")
        self.label_8 = QtWidgets.QLabel(self.centralwidget)
        self.label_8.setGeometry(QtCore.QRect(510, 330, 211, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label_8.setFont(font)
        self.label_8.setObjectName("label_8")
        self.label_9 = QtWidgets.QLabel(self.centralwidget)
        self.label_9.setGeometry(QtCore.QRect(340, 400, 141, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_9.setFont(font)
        self.label_9.setObjectName("label_9")
        self.delprod = QtWidgets.QComboBox(self.centralwidget)
        self.delprod.setGeometry(QtCore.QRect(500, 410, 241, 22))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.delprod.setFont(font)
        self.delprod.setObjectName("delprod")
        self.delupdate = QtWidgets.QPushButton(self.centralwidget)
        self.delupdate.setGeometry(QtCore.QRect(810, 410, 91, 23))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.delupdate.setFont(font)
        self.delupdate.setObjectName("delupdate")
        self.label_10 = QtWidgets.QLabel(self.centralwidget)
        self.label_10.setGeometry(QtCore.QRect(520, 500, 211, 31))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(12)
        font.setBold(True)
        font.setWeight(75)
        self.label_10.setFont(font)
        self.label_10.setObjectName("label_10")
        self.label_11 = QtWidgets.QLabel(self.centralwidget)
        self.label_11.setGeometry(QtCore.QRect(110, 580, 191, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_11.setFont(font)
        self.label_11.setObjectName("label_11")
        self.custnumber = QtWidgets.QComboBox(self.centralwidget)
        self.custnumber.setGeometry(QtCore.QRect(310, 590, 171, 22))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.custnumber.setFont(font)
        self.custnumber.setObjectName("custnumber")
        self.label_12 = QtWidgets.QLabel(self.centralwidget)
        self.label_12.setGeometry(QtCore.QRect(530, 580, 111, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_12.setFont(font)
        self.label_12.setObjectName("label_12")
        self.custfield = QtWidgets.QComboBox(self.centralwidget)
        self.custfield.setGeometry(QtCore.QRect(600, 590, 141, 22))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.custfield.setFont(font)
        self.custfield.setObjectName("custfield")
        self.label_13 = QtWidgets.QLabel(self.centralwidget)
        self.label_13.setGeometry(QtCore.QRect(770, 580, 111, 41))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.label_13.setFont(font)
        self.label_13.setObjectName("label_13")
        self.custnewfield = QtWidgets.QLineEdit(self.centralwidget)
        self.custnewfield.setGeometry(QtCore.QRect(870, 590, 131, 20))
        self.custnewfield.setObjectName("custnewfield")
        self.pushButton_4 = QtWidgets.QPushButton(self.centralwidget)
        self.pushButton_4.setGeometry(QtCore.QRect(1040, 590, 91, 23))
        font = QtGui.QFont()
        font.setFamily("Arial")
        font.setPointSize(9)
        font.setBold(True)
        font.setWeight(75)
        self.pushButton_4.setFont(font)
        self.pushButton_4.setObjectName("pushButton_4")
        MainWindow.setCentralWidget(self.centralwidget)
        conn_p = sqlite3.connect('product.db')
        conn_u = sqlite3.connect('users.db')
        cursor_p = conn_p.execute("SELECT NAME from PRODUCT")
        prodlist = []
        moblist = []
        for row in cursor_p:
            prodlist.append(row[0])
        cursor_u = conn_u.execute("SELECT MOBILE from USER")
        for row in cursor_u:
            moblist.append(row[0])
        conn_u.close()
        conn_p.close()
        self.custnumber.addItems(moblist)
        self.custfield.addItems(['NAME','MOBILE','ADDRESS'])
        self.delprod.addItems(prodlist)
        self.editprod.addItems(prodlist)
        self.retranslateUi(MainWindow)
        self.delprod.model().sort(0)
        self.editprod.model().sort(0)
        self.custnumber.model().sort(0)
        self.editprod.activated.connect(self.comboboxupdate)
        self.editprodupdate.clicked.connect(self.editprodprice)
        self.addprodupdate.clicked.connect(self.addnewprod)
        self.delupdate.clicked.connect(self.delproduct)
        self.pushButton_4.clicked.connect(self.editcustomer)
        self.delprod.setInsertPolicy(QtWidgets.QComboBox.InsertAlphabetically)
        self.editprod.setInsertPolicy(QtWidgets.QComboBox.InsertAlphabetically)
        self.custnumber.setInsertPolicy(QtWidgets.QComboBox.InsertAlphabetically)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        _translate = QtCore.QCoreApplication.translate
        MainWindow.setWindowTitle(_translate("MainWindow", "KANAK-Update"))
        self.label.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" text-decoration: underline;\">Edit Product Price (per kg)</span></p></body></html>"))
        self.label_2.setText(_translate("MainWindow", "Choose Product:"))
        self.label_3.setText(_translate("MainWindow", "Enter New Price:"))
        self.editprodupdate.setText(_translate("MainWindow", "UPDATE"))
        self.label_4.setText(_translate("MainWindow", "Current Price:"))
        self.label_5.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" text-decoration: underline;\">Add New Product</span></p></body></html>"))
        self.label_6.setText(_translate("MainWindow", "Product Name:"))
        self.label_7.setText(_translate("MainWindow", "Price (per Kg):"))
        self.addprodupdate.setText(_translate("MainWindow", "ADD"))
        self.label_8.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" text-decoration: underline;\">Delete Product</span></p></body></html>"))
        self.label_9.setText(_translate("MainWindow", "Choose Product:"))
        self.delupdate.setText(_translate("MainWindow", "DELETE"))
        self.label_10.setText(_translate("MainWindow", "<html><head/><body><p align=\"center\"><span style=\" text-decoration: underline;\">Edit Customer Details</span></p></body></html>"))
        self.label_11.setText(_translate("MainWindow", "Customer Phone Number:"))
        self.label_12.setText(_translate("MainWindow", "Field:"))
        self.label_13.setText(_translate("MainWindow", "New Details:"))
        self.pushButton_4.setText(_translate("MainWindow", "UPDATE"))

    def editprodprice(self):
        try:
            conn_p = sqlite3.connect('product.db')
            product = self.editprod.currentText()
            new_price = self.editnewprice.text()
            if len(new_price.strip())==0:
                self.messagewindow("Enter New Price",info="Error")
            else:
                conn_p.execute("UPDATE PRODUCT set PRICE=? where NAME=?",(int(new_price),product))
                conn_p.commit()
                conn_p.close()
                self.messagewindow('Product Price Updated.',info="Success!")
                self.editnewprice.setText("")
        except Exception as e:
            self.messagewindow(e,info="Error")

    def comboboxupdate(self):
        conn_p = sqlite3.connect('product.db')
        product = self.editprod.currentText()
        cursor_p = conn_p.execute("SELECT PRICE from PRODUCT where NAME =?",(product,))
        for row in cursor_p:
            price = row[0]
        conn_p.close()
        self.currentprice.setText(str(price))
        self.currentprice.setReadOnly(True)

    def addnewprod(self):
        try:
            conn_p = sqlite3.connect('product.db')
            product = self.addprod.text()
            price = self.addprodprice.text()
            if len(product.strip())==0 or len(price.strip())==0:
                self.messagewindow("Enter Details of New Product",info="Error")
            else:
                conn_p.execute("INSERT INTO PRODUCT (NAME,PRICE) VALUES (?,?)",
                                    (product,price))
                conn_p.commit()
                conn_p.close()
                self.delprod.addItem(product)
                self.editprod.addItem(product)
                self.delprod.model().sort(0)
                self.editprod.model().sort(0)
                self.messagewindow('Product Added to the Database.',info="Success!")
                self.addprod.setText("")
                self.addprodprice.setText("")
        except Exception as e:
            self.messagewindow(e,info="Error")

    def delproduct(self):
        try:
            conn_p = sqlite3.connect('product.db')
            product = self.delprod.currentText()
            if len(product.strip())==0:
                self.messagewindow("Select the Product to be Deleted",info="Error")
            else:
                conn_p.execute("DELETE from PRODUCT where NAME=?",(product,))
                conn_p.commit()
                conn_p.close()
                indexcomboe = self.delprod.findText(product)
                indexcombod = self.editprod.findText(product)
                self.delprod.removeItem(indexcombod)
                self.editprod.removeItem(indexcomboe)
                self.delprod.model().sort(0)
                self.editprod.model().sort(0)
                self.messagewindow('Product Deleted from Database.',info="Success!")

        except Exception as e:
            self.messagewindow(e,info="Error")

    def editcustomer(self):
        try:
            conn_u = sqlite3.connect('users.db')
            mobileno = self.custnumber.currentText()
            field = self.custfield.currentText()
            newdetails = self.custnewfield.text()
            if len(newdetails.strip())==0:
                self.messagewindow("Enter Details to be Edited",info="Error")
            elif field=="ADDRESS" and len(newdetails) >130:
                self.messagewindow("Address Character Limit Exceeded", info="Error")
            else:
                conn_u.execute("UPDATE USER set ("+ field +") =? where MOBILE=?",(newdetails,mobileno))
                conn_u.commit()
                conn_u.close()
                if field == "MOBILE":
                    indexcombop = self.custnumber.findText(mobileno)
                    self.custnumber.removeItem(indexcombop)
                    self.custnumber.addItem(newdetails)
                    self.custnumber.model().sort(0)
                self.messagewindow('Customer Details Edited.',info="Success!")
                self.custnewfield.setText("")

        except Exception as e:
            self.messagewindow(e,info="Error")

    def messagewindow(self,text,info):
        msg = QtWidgets.QMessageBox()
        msg.setIcon(QtWidgets.QMessageBox.Information)
        #msg.setText("Update Successful")
        msg.setInformativeText(str(text))
        msg.setWindowTitle(str(info))
        msg.exec_()



os.environ["QT_AUTO_SCREEN_SCALE_FACTOR"] = "1"
QtWidgets.QApplication.setAttribute(QtCore.Qt.AA_EnableHighDpiScaling, True)
app = QtWidgets.QApplication(sys.argv)
#app.setAttribute(QtCore.Qt.AA_EnableHighDpiScaling)
mainwin = QtWidgets.QMainWindow()
ui = Ui_mainwin()
ui.setupUi(mainwin)
#mainwin.setFixedSize(1366, 768)
#mainwin.showMaximized()
#mainwin.screen()
mainwin.show()
sys.exit(app.exec_())
